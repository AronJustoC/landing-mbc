---
// Hero.astro - Main Container
import HeroMain from "./hero/HeroMain.astro";
import HeroPillars from "./hero/HeroPillars.astro";
import HeroClients from "./hero/HeroClients.astro";
import HeroStats from "./hero/HeroStats.astro";
import HeroTestimonials from "./hero/HeroTestimonials.astro";
---

<!-- Compose the Hero Section -->
<HeroMain />
<HeroPillars />
<HeroClients />
<HeroStats />
<HeroTestimonials />

<!-- Global Styles for Hero Animations -->
<style is:global>
  /* Reveal Section Logic */
  .animate-item {
    opacity: 0;
    transform: translateY(2rem);
    transition-property: opacity, transform;
    transition-duration: 0.8s;
    transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .reveal-section.is-visible .animate-item {
    opacity: 1;
    transform: translateY(0);
  }

  /* Stagger Delays */
  .reveal-section.is-visible .animate-item:nth-child(1) {
    transition-delay: 0.1s;
  }
  .reveal-section.is-visible .animate-item:nth-child(2) {
    transition-delay: 0.2s;
  }
  .reveal-section.is-visible .animate-item:nth-child(3) {
    transition-delay: 0.3s;
  }
  .reveal-section.is-visible .animate-item:nth-child(4) {
    transition-delay: 0.4s;
  }
  .reveal-section.is-visible .animate-item:nth-child(5) {
    transition-delay: 0.5s;
  }

  /* Utility Animations */
  @keyframes shine {
    100% {
      transform: translateX(100%);
    }
  }
  .animate-shine {
    animation: shine 1.5s infinite;
  }
</style>

<!-- Global Script for Reveal Logic -->
<script>
  function initReveal() {
    const sections = document.querySelectorAll(".reveal-section");
    const io = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("is-visible");
          }
        });
      },
      { threshold: 0.15 }
    );
    sections.forEach((section) => io.observe(section));
  }

  // Run on load and on Astro transitions
  document.addEventListener("DOMContentLoaded", initReveal);
  document.addEventListener("astro:page-load", initReveal);
</script>
