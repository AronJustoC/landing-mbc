---
import { Image } from "astro:assets";

interface Props {
    title: string;
    subtitle?: string;
    image: ImageMetadata;
    id?: string;
    large?: boolean; // Option to make it a full page hero vs section header
}

const { title, subtitle, image, id, large = true } = Astro.props;
---

<div
    id={id}
    class={`relative flex items-center justify-center overflow-hidden bg-[#08080A] ${large ? "min-h-[50vh] md:min-h-[60vh]" : "min-h-[40vh]"}`}
>
    <!-- Background Image with Overlay -->
    <div class="absolute inset-0 z-0">
        <div class="animate-hero-bg absolute inset-0">
            <Image
                src={image}
                alt={`${title} background`}
                class="w-full h-full object-cover opacity-30 mix-blend-screen"
                width={1920}
                height={1080}
            />
        </div>
        <div
            class="absolute inset-0 bg-gradient-to-b from-[#08080A]/60 via-[#08080A]/50 to-[#08080A]"
        >
        </div>
        <div
            class="absolute inset-0 bg-gradient-to-r from-[#08080A] via-transparent to-[#08080A]"
        >
        </div>
    </div>

    <div class="container mx-auto px-4 z-10 relative text-center">
        <h2
            class="text-4xl md:text-6xl font-bold text-white mb-6 tracking-tight opacity-0 animate-blur-up"
            style="animation-delay: 0.1s;"
        >
            <span
                class="bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400"
                >{title}</span
            >
        </h2>
        {
            subtitle && (
                <p
                    class="text-xl md:text-2xl text-[#31B0FF] font-light max-w-3xl mx-auto drop-shadow-lg drop-shadow-black/20 opacity-0 animate-blur-up"
                    style="animation-delay: 0.3s;"
                >
                    {subtitle}
                </p>
            )
        }

        <!-- Decoration Line -->
        <div
            class="h-1 bg-gradient-to-r from-[#31B0FF] to-[#0099cc] rounded-full mx-auto mt-8 opacity-0 animate-grow-line"
            style="animation-delay: 0.6s;"
        >
        </div>
    </div>
</div>

<style>
    @keyframes hero-move-scale {
        0% {
            transform: scale(1.1);
        }
        100% {
            transform: scale(1);
        }
    }

    @keyframes blur-up {
        0% {
            opacity: 0;
            transform: translateY(30px);
            filter: blur(10px);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
            filter: blur(0);
        }
    }

    @keyframes grow-line {
        0% {
            width: 0;
            opacity: 0;
        }
        100% {
            width: 6rem; /* w-24 */
            opacity: 0.8;
        }
    }

    .animate-hero-bg {
        animation: hero-move-scale 20s cubic-bezier(0.25, 1, 0.5, 1) forwards;
        will-change: transform;
    }

    .animate-blur-up {
        animation: blur-up 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        will-change: opacity, transform, filter;
    }

    .animate-grow-line {
        animation: grow-line 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        will-change: width, opacity;
    }
</style>
