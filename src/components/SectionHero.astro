---
import { Image } from "astro:assets";
import Breadcrumb from "./Breadcrumb.astro";

interface BreadcrumbItem {
    name: string;
    href: string;
    current?: boolean;
}

interface Props {
    title: string;
    subtitle?: string;
    image: ImageMetadata;
    id?: string;
    large?: boolean;
    breadcrumbItems?: BreadcrumbItem[];
    category?: string; // Optional small text above title
}

const {
    title,
    subtitle,
    image,
    id,
    large = true,
    breadcrumbItems,
    category,
} = Astro.props;
---

<div
    id={id}
    class={`relative flex flex-col items-center justify-center overflow-hidden bg-[#08080A] ${large ? "min-h-[60vh] md:min-h-[75vh] pt-32 pb-24" : "min-h-[45vh] pt-28 pb-16"}`}
>
    <!-- Background Image with Ultra-Premium Overlay -->
    <div class="absolute inset-0 z-0">
        <div class="animate-hero-bg absolute inset-0">
            <Image
                src={image}
                alt={`${title} background`}
                class="w-full h-full object-cover opacity-20 contrast-125 grayscale-[50%]"
                width={1920}
                height={1080}
            />
        </div>
        <!-- Gradient layers for depth -->
        <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_0%,#08080A_100%)]"></div>
        <div class="absolute inset-0 bg-gradient-to-b from-[#08080A]/80 via-transparent to-[#08080A]"></div>
    </div>

    {
        breadcrumbItems && (
            <div class="container mx-auto px-6 z-20 relative flex justify-center mb-auto max-w-7xl">
                <Breadcrumb items={breadcrumbItems} />
            </div>
        )
    }

    <div class="container mx-auto px-6 z-10 relative text-center mt-auto max-w-5xl">
        {category && (
            <span class="text-[#31B0FF] font-bold text-[10px] uppercase tracking-[0.5em] mb-6 block opacity-0 animate-blur-up" style="animation-delay: 0.1s;">
                {category}
            </span>
        )}
        
        <h2
            class="text-5xl md:text-7xl lg:text-8xl font-black text-white mb-8 tracking-tighter opacity-0 animate-blur-up"
            style="animation-delay: 0.2s;"
        >
            {title.includes(" ") ? (
                <>
                    <span class="text-white">{title.split(" ")[0]}</span>
                    <span class="text-gray-500 italic ml-2">{title.split(" ").slice(1).join(" ")}</span>
                </>
            ) : (
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400">{title}</span>
            )}
        </h2>
        
        {
            subtitle && (
                <p
                    class="text-lg md:text-xl text-gray-400 font-light max-w-3xl mx-auto leading-relaxed opacity-0 animate-blur-up"
                    style="animation-delay: 0.4s;"
                >
                    {subtitle}
                </p>
            )
        }

        <!-- Refined Decoration Line -->
        <div
            class="h-px bg-gradient-to-r from-transparent via-[#31B0FF]/40 to-transparent mx-auto mt-12 opacity-0 animate-grow-line"
            style="animation-delay: 0.7s;"
        >
        </div>
    </div>
</div>

<style>
    @keyframes hero-move-scale {
        0% {
            transform: scale(1.1);
        }
        100% {
            transform: scale(1);
        }
    }

    @keyframes blur-up {
        0% {
            opacity: 0;
            transform: translateY(30px);
            filter: blur(10px);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
            filter: blur(0);
        }
    }

    @keyframes grow-line {
        0% {
            width: 0;
            opacity: 0;
        }
        100% {
            width: 6rem; /* w-24 */
            opacity: 0.8;
        }
    }

    .animate-hero-bg {
        animation: hero-move-scale 20s cubic-bezier(0.25, 1, 0.5, 1) forwards;
        will-change: transform;
    }

    .animate-blur-up {
        animation: blur-up 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        will-change: opacity, transform, filter;
    }

    .animate-grow-line {
        animation: grow-line 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        will-change: width, opacity;
    }
</style>
